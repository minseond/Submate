import{R as P,u as w,a as S,i as E,j as e,C,F as i,B as g,m as l,T as u,d as A,b,c as _,r as y,e as v}from"./index-ffe365db.js";import{u as T,T as h,l as R,G as U}from"./ThemeButton-d9ace1e1.js";import{s as x,t as k,C as D,P as F}from"./schema-e766bade.js";import{u as I,a as L}from"./index.esm-53a1115d.js";const m="회원탈퇴",M=()=>{const[r,a]=P(w),o=S(E),{userInfo:c}=T({select:n=>n.name}),d=async()=>{try{const{isLogin:n,message:t}=await A(r);a(null),localStorage.removeItem("user"),o(n),l.closeAll(),x(!0,m,t)}catch{x(!1,m)}},s=()=>{l.openConfirmModal({title:m,centered:!0,closeOnConfirm:!1,labels:{confirm:"예",cancel:"아니오"},children:e.jsxs(i,{direction:"column",gap:20,children:[e.jsxs(u,{children:[" ",c,"님의 서브메이트가 삭제되며 복구 불가능합니다."]}),e.jsx(u,{children:" 이에 동의하십니까?"})]}),onConfirm:()=>{l.closeAll(),l.openConfirmModal({title:m,centered:!0,labels:{confirm:"탈퇴하기",cancel:"취소하기"},closeOnConfirm:!1,children:e.jsx(u,{size:"sm",children:"그동안 를 이용해 주셔서 감사합니다."}),onCancel:l.closeAll,onConfirm:d})}})};return e.jsx(C,{p:0,children:e.jsxs(i,{gap:50,align:"center",justify:"space-between",children:[e.jsx(h,{order:5,children:"회원탈퇴"}),e.jsx(g,{onClick:s,variant:"outline",children:"탈퇴"})]})})},p="비밀번호 변경",O=()=>{const r=b(w),{control:a,trigger:o,handleSubmit:c}=I({resolver:k(D)}),d=async n=>{try{const t=await _(r,n);x(!0,p,t),l.closeAll()}catch(t){const j=t.response&&t.response.status===401?t.response.data:void 0;x(!1,p,j)}},s=()=>{l.open({title:p,centered:!0,children:e.jsx("form",{onSubmit:n=>{n.preventDefault(),c(d)()},children:e.jsxs(i,{direction:"column",gap:10,children:[e.jsx(f,{label:"현재 비밀번호",control:a,trigger:o,name:"nowPassword"}),e.jsx(f,{label:"새 비밀번호",control:a,trigger:o,name:"newPassword"}),e.jsx(f,{label:"새 비밀번호 확인",control:a,trigger:o,name:"confirmPassword"}),e.jsx(g,{type:"submit",children:"제출"})]})})})};return e.jsx(C,{my:10,p:0,children:e.jsxs(i,{gap:50,align:"center",justify:"space-between",children:[e.jsx(h,{order:5,children:"비밀번호"}),e.jsx(g,{onClick:s,variant:"outline",children:"수정"})]})})},f=({name:r,control:a,trigger:o,label:c})=>{const{field:{onChange:d},fieldState:{error:s}}=L({name:r,control:a,defaultValue:{}}),n=y.useCallback(()=>{R.debounce(()=>{o(r)},100)()},[r,o]),t=j=>{d(j),n()};return e.jsx(F,{onChange:t,placeholder:"Password",error:(s==null?void 0:s.message)!=="Expected string, received object"&&(s==null?void 0:s.message),label:c,withAsterisk:!0})},B=()=>{v();const r=b(w);return e.jsx(U,{children:e.jsx(i,{w:1240,mt:"1rem",mx:"auto",size:"100%",miw:375,direction:"column",justify:"center",children:e.jsxs(C,{w:400,mt:100,children:[e.jsx(h,{order:2,align:"center",my:20,children:"👾 나의 프로필 수정 👾"}),e.jsxs(i,{gap:50,mt:10,justify:"space-between",children:[e.jsx(h,{order:5,children:"이메일"}),e.jsx(u,{children:r})]}),e.jsx(O,{}),e.jsx(y.Suspense,{children:e.jsx(M,{})})]})})})};export{B as default};
